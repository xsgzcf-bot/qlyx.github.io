<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é£è¡Œæ£‹-é«˜çº§ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .game-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        h1 {
            font-size: 24px;
            margin: 10px 0;
            color: #333;
        }
        
        .board {
            width: 100%;
            height: 50%;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 4px;
            margin-bottom: 10px;
            background-color: #fff;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #e0f7fa;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            position: relative;
            cursor: pointer;
        }
        
        .cell.special {
            background-color: #ffccbc;
        }
        
        .cell.start {
            background-color: #c8e6c9;
        }
        
        .cell.end {
            background-color: #ffcdd2;
        }
        
        .player1 {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: transparent;
            border-radius: 50%;
            z-index: 10;
        }
        
        .player1::before {
            content: "ğŸ‘¦";
            font-size: 20px;
            position: absolute;
        }
        
        .player2 {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: transparent;
            border-radius: 50%;
            z-index: 10;
        }
        
        .player2::before {
            content: "ğŸ‘§";
            font-size: 20px;
            position: absolute;
        }
        
        .dice-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .dice {
            width: 60px;
            height: 60px;
            background-color: #fff;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            margin-bottom: 8px;
            user-select: none;
        }
        
        .dice:active {
            transform: scale(0.95);
        }
        
        #roll-btn {
            padding: 8px 16px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        
        #roll-btn:active {
            background-color: #3367d6;
        }
        
        .player-info {
            width: 100%;
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px;
        }
        
        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .player.active {
            background-color: #e3f2fd;
            box-shadow: 0 0 0 3px #2196f3;
            transform: scale(1.05);
        }
        
        .player1-info {
            color: #4285f4;
        }
        
        .player2-info {
            color: #ea4335;
        }
        
        .rules {
            width: 100%;
            background-color: #fff;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            max-height: 120px;
            font-size: 12px;
        }
        
        .rules h3 {
            margin-bottom: 8px;
            color: #2196f3;
            font-size: 14px;
        }
        
        .rules ul {
            padding-left: 16px;
        }
        
        .rules li {
            margin-bottom: 4px;
        }
        
        .message {
            width: 100%;
            padding: 8px;
            background-color: #e3f2fd;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 8px;
            font-size: 13px;
            color: #2196f3;
            font-weight: bold;
        }
        
        .task-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 300px;
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 100;
            display: none;
            text-align: center;
        }
        
        .task-popup h3 {
            margin-bottom: 15px;
            color: #ff9800;
        }
        
        .task-popup p {
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .task-popup button {
            padding: 8px 16px;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .task-popup button:active {
            background-color: #f57c00;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>é£è¡Œæ£‹-é«˜çº§ç‰ˆ</h1>
        
        <div class="message" id="message">ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­</div>
        
        <div class="board" id="board">
            <!-- æ£‹ç›˜æ ¼å­å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="player-info">
            <div class="player player1-info active" id="player1-info">
                <span>ç©å®¶1</span>
                <span id="player1-pos">ä½ç½®: èµ·ç‚¹</span>
            </div>
            <div class="player player2-info" id="player2-info">
                <span>ç©å®¶2</span>
                <span id="player2-pos">ä½ç½®: èµ·ç‚¹</span>
            </div>
        </div>
        
        <div class="dice-container">
            <div class="dice" id="dice">?</div>
            <button id="roll-btn">æ·éª°éª°å­</button>
        </div>
        
        <div class="rules">
            <h3>æ¸¸æˆè§„åˆ™</h3>
            <ul>
                <li>ä¸¤ä½ç©å®¶è½®æµæ·éª°éª°å­å‰è¿›</li>
                <li>å…ˆåˆ°è¾¾ç»ˆç‚¹ï¼ˆç¬¬50æ ¼ï¼‰çš„ç©å®¶è·èƒœ</li>
                <li>æ‰€æœ‰æ ¼å­éƒ½æœ‰å›ºå®šä»»åŠ¡</li>
                <li>ç‰¹æ®Šæ ¼å­æœ‰åé€€ã€å‰è¿›æˆ–é‡æ‘‡æ•ˆæœ</li>
                <li>æ™®é€šæ ¼å­æœ‰å›ºå®šäº’åŠ¨ä»»åŠ¡</li>
            </ul>
        </div>
        
        <div class="task-popup" id="task-popup">
            <h3 id="task-title">ä»»åŠ¡</h3>
            <p id="task-content"></p>
            <button id="task-ok">ç¡®å®š</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆçŠ¶æ€
            const gameState = {
                currentPlayer: 1,
                player1Pos: 0,
                player2Pos: 0,
                diceValue: 0,
                gameOver: false,
                isProcessing: false, // æ ‡è®°æ˜¯å¦æ­£åœ¨å¤„ç†ä»»åŠ¡
                // ç‰¹æ®Šæ ¼å­å®šä¹‰
                specialCells: {
                    6: { type: 'back', value: 1, message: 'åé€€1æ ¼!' },
					9: { type: 'back', value: 2, message: 'åé€€2æ ¼!' },
					17: { type: 'forward', value: 2, message: 'å‰è¿›2æ ¼!' },
					25: { type: 'back', value: 5, message: 'åé€€5æ ¼!' },
                    34: { type: 'back', value: 15, message: 'åé€€15æ ¼!' },
                    35: { type: 'back', value: 4, message: 'åé€€4æ ¼!' },
					48: { type: 'back', value: 2, message: 'åé€€2æ ¼!' },
                },
                // æ‰€æœ‰æ ¼å­çš„å›ºå®šä»»åŠ¡
                cellTasks: {
                    1: "èµ·ç‚¹",
                    2: "æ¸¸æˆå¼€å§‹ï¼ç»™å¯¹æ–¹ä¸€ä¸ªæ‹¥æŠ±",
                    3: "æ‰‹ä¼¸è¿›å¯¹æ–¹å†…è£¤éšæ„å‘æŒ¥30ç§’",
                    4: "[æƒ©ç½š]æ’…èµ·å±å±è®©å¯¹æ–¹æ‰“3ä¸‹",
                    5: "[ç¦åˆ©]å¯¹æ–¹ç»™ä½ å£æŒ‡å®šéƒ¨ä½1åˆ†é’Ÿ",
                    6: "åé€€ä¸€æ­¥å¹¶è„±å…‰[ç©¿æƒ…è¶£å†…è¡£]",
                    7: "éœ²å‡ºç§å¤„å¹¶å…è®¸å¯¹æ–¹æ‹ç…§ä¸€å¼ ",
                    8: "èˆ”å¯¹æ‰‹çš„ä¸è¶³æˆ–æ‰‹æŒ‡10ç§’",
                    9: "åé€€äºŒæ ¼å¹¶è„±å…‰[ç©¿æƒ…è¶£å†…è¡£]",
                    10: "æƒ³å°½åŠæ³•å¼„å¯¹æ‰‹å‹ƒèµ·æˆ–æµæ°´",
                    11: "å¼¹å¯¹æ–¹jjæˆ–å¥¶å­",
                    12: "å¸å®å¯¹æ–¹æ‰‹æŒ‡10ç§’",
                    13: "å¥³ç©¿æƒ…è¶£å†…è¡£ï¼Œç”·èˆ”å¯¹æ–¹åèƒŒ1åˆ†é’Ÿ",
                    14: "è¢«å¯¹æ–¹ç”¨ç‰™é½¿å’¬ä½ä¹³å¤´ç£¨è¹­10ç§’",
                    15: "[ç¦åˆ©]å¯¹æ–¹å«ç€æ°´åœ¨ä½ èº«ä¸Šäº²å»30ç§’",
                    16: "ç”¨å˜´å«ä½å¯¹æ‰‹è›‹è›‹æˆ–é˜´è’‚30ç§’",
                    17: "è§£é™¤æƒ©ç½šå¹¶å‰è¿›äºŒæ ¼",
                    18: "ä»èƒŒåä¼¸æ‰‹è¿‡æ¥æ‰èƒ¸30ç§’",
                    19: "åäººæ’å…¥20æ¬¡ä¸è®¸å°„",
                    20: "è·Ÿå¯¹æ–¹ä¹³äº¤30ç§’",
                    21: "è¢«å¯¹æ‰‹ç”¨ç‰™é½¿å’¬ä½ä¹³å¤´ç£¨è¹­15ç§’",
                    22: "å¯¹æ–¹ç«™ç€è‡ªå·±è·ªç€å¸®ä»–å£30ç§’",
                    23: "è‡ªå·±ä½¿ç”¨å®‰æ…°æ£’æŒ‰æ‘©ç§å¤„2åˆ†é’Ÿ",
                    24: "å°†é…¸å¥¶å€’åœ¨å¯¹æ–¹ä¹³å¤´ä¸Šèˆ”å¹²å‡€åƒæ‰",
                    25: "åé€€äº”æ ¼å¹¶ä¸ºå¯¹æ–¹å£äº¤1åˆ†é’Ÿ",
                    26: "æ‰å¯¹æ–¹èƒ¸3ä¸‹æˆ–è½»å’¬å¯¹æ–¹è€³å‚5ä¸‹",
                    27: "æƒ³å°½åŠæ³•å¼„å¯¹æ‰‹å‹ƒèµ·æˆ–æµæ°´",
                    28: "ä¸å¯¹æ–¹69å¼1åˆ†é’Ÿ",
                    29: "åå…¥æ’äºº20æ¬¡å¹¶æ‹è§†é¢‘ç•™å¿µ",
                    30: "æ‹ä¸€æ®µç»™å¯¹æ–¹å£çš„è§†é¢‘15ç§’",
                    31: "ç”·æ–¹ç«™ç«‹æŠ±èµ·å¥³æ–¹æ‚¬ç©ºæ’å…¥20æ¬¡ä¸è®¸å°„",
                    32: "å¯¹æ–¹åè‡ªå·±è„¸ä¸Šï¼Œå¸å®å¯¹æ–¹jjæˆ–é˜´è’‚30ç§’",
                    33: "ç”¨é˜´è’‚æˆ–è€…JJè¹­å¯¹æ–¹çš„è„¸15ç§’",
                    34: "è¢«å¯¹æ‰‹ç”¨å±Œæ‰“è„¸3ä¸‹æˆ–Bè¹­è„¸10ç§’",
                    35: "åé€€å››æ ¼å¹¶è„±å…‰[ç©¿æƒ…è¶£å†…è¡£]",
                    36: "èˆ”å¯¹æ–¹çš„è„–å­åˆ°èƒ¸30ç§’",
                    37: "è§‚éŸ³åè²30ç§’è¿åŠ¨ä¸è®¸å°„",
                    38: "[ç¦åˆ©]å¯¹æ–¹èˆ”ä½ èº«ä¸Šçš„å„ä¸ªéƒ¨ä½1åˆ†é’Ÿ",
                    39: "åé€€å…­æ ¼å¹¶è‡ªæ‹äº²å»è§†é¢‘",
                    40: "[ç¦åˆ©]å¯¹æ‰‹å¸®ä½ èˆ”å…¨èº«å„ä¸ªéƒ¨ä½2åˆ†é’Ÿ",
                    41: "ç”¨å˜´å«ä½å¯¹æ‰‹è›‹è›‹æˆ–é˜´è’‚2åˆ†é’Ÿ",
                    42: "è¢«å¯¹æ‰‹ç”¨å±Œæ‰“è„¸5ä¸‹æˆ–Bè¹­è„¸15ç§’",
                    43: "ç”¨æ‰‹æŠ è‡ªå·±ä¸‹é¢1åˆ†é’Ÿæˆ–æ’¸30ä¸‹",
                    44: "å£å«çƒ­æ°´ç»™å¯¹æ‰‹è¿›è¡Œå£30ç§’",
                    45: "ååˆ°å¯¹æ–¹è„¸ä¸Šè®©å¯¹æ–¹å¸å®30ç§’",
                    46: "å£å«å†°æ°´æˆ–å†°å—ç»™å¯¹æ‰‹è¿›è¡Œå£30ç§’",
                    47: "å¯¹æ–¹ç«™ç€è‡ªå·±è·ªç€å¸®ä»–å£ä¸€åˆ†é’Ÿ",
                    48: "åé€€2æ ¼å¹¶æ‹è§†é¢‘åŠåˆ†é’Ÿ",
                    49: "ä¸å¯¹æ–¹69å¼1åˆ†é’Ÿ",
                    50: "æŠŠå¥³ç”Ÿæ—¥é«˜æ½®ä¸è®¸å°„å†å£çˆ†åç²¾æˆ–å°„è„¸ä¸Š/èƒ¸ä¸Š"
                }
            };
            
            // DOM å…ƒç´ 
            const board = document.getElementById('board');
            const dice = document.getElementById('dice');
            const rollBtn = document.getElementById('roll-btn');
            const message = document.getElementById('message');
            const player1Info = document.getElementById('player1-info');
            const player2Info = document.getElementById('player2-info');
            const player1Pos = document.getElementById('player1-pos');
            const player2Pos = document.getElementById('player2-pos');
            const taskPopup = document.getElementById('task-popup');
            const taskTitle = document.getElementById('task-title');
            const taskContent = document.getElementById('task-content');
            const taskOk = document.getElementById('task-ok');
            
            // åˆ›å»ºæ£‹ç›˜
            function createBoard() {
                board.innerHTML = '';
                
                // åˆ›å»º50ä¸ªæ ¼å­
                for (let i = 1; i <= 50; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = i;
                    cell.id = `cell-${i}`;
                    
                    // æ ‡è®°ç‰¹æ®Šæ ¼å­
                    if (gameState.specialCells[i]) {
                        cell.classList.add('special');
                    }
                    
                    // èµ·ç‚¹å’Œç»ˆç‚¹
                    if (i === 1) {
                        cell.classList.add('start');
                    } else if (i === 50) {
                        cell.classList.add('end');
                    }
                    
                    board.appendChild(cell);
                }
                
                // æ·»åŠ ç©å®¶æ£‹å­
                updatePlayerPositions();
            }
            
            // æ›´æ–°ç©å®¶ä½ç½®
            function updatePlayerPositions() {
                // ç§»é™¤æ—§çš„æ£‹å­
                const oldPieces = document.querySelectorAll('.player1, .player2');
                oldPieces.forEach(piece => piece.remove());
                
                // æ·»åŠ ç©å®¶1æ£‹å­
                if (gameState.player1Pos > 0 && gameState.player1Pos <= 50) {
                    const cell = document.getElementById(`cell-${gameState.player1Pos}`);
                    const piece = document.createElement('div');
                    piece.className = 'player1';
                    cell.appendChild(piece);
                }
                
                // æ·»åŠ ç©å®¶2æ£‹å­
                if (gameState.player2Pos > 0 && gameState.player2Pos <= 50) {
                    const cell = document.getElementById(`cell-${gameState.player2Pos}`);
                    const piece = document.createElement('div');
                    piece.className = 'player2';
                    cell.appendChild(piece);
                }
                
                // æ›´æ–°ä½ç½®æ˜¾ç¤º
                player1Pos.textContent = gameState.player1Pos === 0 ? 'ä½ç½®: èµ·ç‚¹' : `ä½ç½®: ${gameState.player1Pos}`;
                player2Pos.textContent = gameState.player2Pos === 0 ? 'ä½ç½®: èµ·ç‚¹' : `ä½ç½®: ${gameState.player2Pos}`;
            }
            
            // æ·éª°éª°å­
            function rollDice() {
                return Math.floor(Math.random() * 6) + 1;
            }
            
            // åˆ‡æ¢ç©å®¶
            function switchPlayer() {
                gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
                
                if (gameState.currentPlayer === 1) {
                    player1Info.classList.add('active');
                    player2Info.classList.remove('active');
                    message.textContent = 'ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                    message.style.backgroundColor = '#e3f2fd';
                    message.style.color = '#4285f4';
                } else {
                    player1Info.classList.remove('active');
                    player2Info.classList.add('active');
                    message.textContent = 'ç©å®¶2çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                    message.style.backgroundColor = '#ffebee';
                    message.style.color = '#ea4335';
                }
            }
            
            // æ˜¾ç¤ºä»»åŠ¡å¼¹çª—
            function showTaskPopup(title, content) {
                gameState.isProcessing = true; // æ ‡è®°æ­£åœ¨å¤„ç†ä»»åŠ¡
                taskTitle.textContent = title;
                taskContent.textContent = content;
                taskPopup.style.display = 'block';
                
                return new Promise((resolve) => {
                    taskOk.onclick = function() {
                        taskPopup.style.display = 'none';
                        gameState.isProcessing = false; // æ ‡è®°ä»»åŠ¡å¤„ç†å®Œæˆ
                        resolve();
                    };
                });
            }
            
            // å¤„ç†æ ¼å­ä»»åŠ¡/
async function handleCellTask(position, player) {
    const task = gameState.cellTasks[position];
    const cellEffect = gameState.specialCells[position];
    
    // å…ˆæ˜¾ç¤ºæ ¼å­å›ºå®šä»»åŠ¡
    await showTaskPopup('äº’åŠ¨ä»»åŠ¡', task);
    
    if (cellEffect) {
        // ç‰¹æ®Šæ ¼å­
        await showTaskPopup('ç‰¹æ®Šæ•ˆæœ', cellEffect.message);
        
        switch (cellEffect.type) {
            case 'back':
                if (player === 1) {
                    gameState.player1Pos = Math.max(1, gameState.player1Pos - cellEffect.value);
                } else {
                    gameState.player2Pos = Math.max(1, gameState.player2Pos - cellEffect.value);
                }
                break;
                
            case 'forward':
                if (player === 1) {
                    gameState.player1Pos = Math.min(50, gameState.player1Pos + cellEffect.value);
                } else {
                    gameState.player2Pos = Math.min(50, gameState.player2Pos + cellEffect.value);
                }
                break;
                
            case 'reroll':
                return true; // éœ€è¦é‡æ·
        }
        
        updatePlayerPositions();
        
        // å¦‚æœç§»åŠ¨åˆ°äº†æ–°æ ¼å­ï¼Œæ˜¾ç¤ºæ–°æ ¼å­çš„ä»»åŠ¡
        const newPosition = player === 1 ? gameState.player1Pos : gameState.player2Pos;
        if (newPosition !== position) {
            await showTaskPopup('äº’åŠ¨ä»»åŠ¡', gameState.cellTasks[newPosition]);
        }
    }
    
    return false; // ä¸éœ€è¦é‡æ·
}



            // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
            function checkGameOver() {
                if (gameState.player1Pos === 50) {
                    message.textContent = 'ç©å®¶1è·èƒœï¼æ¸¸æˆç»“æŸ';
                    message.style.backgroundColor = '#c8e6c9';
                    message.style.color = '#2e7d32';
                    gameState.gameOver = true;
                    rollBtn.textContent = 'é‡æ–°å¼€å§‹';
                    return true;
                }
                
                if (gameState.player2Pos === 50) {
                    message.textContent = 'ç©å®¶2è·èƒœï¼æ¸¸æˆç»“æŸ';
                    message.style.backgroundColor = '#ffcdd2';
                    message.style.color = '#c62828';
                    gameState.gameOver = true;
                    rollBtn.textContent = 'é‡æ–°å¼€å§‹';
                    return true;
                }
                
                return false;
            }
            
            // å¤„ç†ç©å®¶ç§»åŠ¨
            async function movePlayer(steps) {
                if (gameState.gameOver || gameState.isProcessing) return;
                
                const player = gameState.currentPlayer;
                let currentPosition = player === 1 ? gameState.player1Pos : gameState.player2Pos;
                let newPosition = currentPosition + steps;
                
                // å¦‚æœè¶…è¿‡ç»ˆç‚¹ï¼Œéœ€è¦å€’å›
                if (newPosition > 50) {
                    newPosition = 50 - (newPosition - 50);
                }
                
                // æ·»åŠ ç§»åŠ¨åŠ¨ç”»
                for (let i = 1; i <= steps; i++) {
                    const tempPos = currentPosition + i;
                    if (tempPos > 50) {
                        // å¤„ç†è¶…è¿‡ç»ˆç‚¹çš„æƒ…å†µ
                        const bouncePos = 50 - (tempPos - 50);
                        if (player === 1) {
                            gameState.player1Pos = bouncePos;
                        } else {
                            gameState.player2Pos = bouncePos;
                        }
                    } else {
                        if (player === 1) {
                            gameState.player1Pos = tempPos;
                        } else {
                            gameState.player2Pos = tempPos;
                        }
                    }
                    
                    updatePlayerPositions();
                    await new Promise(resolve => setTimeout(resolve, 300)); // æ¯æ­¥300æ¯«ç§’
                }
                
                if (checkGameOver()) return;
                
                // å¤„ç†æ ¼å­ä»»åŠ¡
                const needsReroll = await handleCellTask(newPosition, player);
                
                if (needsReroll) {
                    message.textContent = player === 1 
                        ? 'ç©å®¶1è·å¾—é‡æ·æœºä¼šï¼' 
                        : 'ç©å®¶2è·å¾—é‡æ·æœºä¼šï¼';
                    return;
                }
                
                // åˆ‡æ¢ç©å®¶
                switchPlayer();
            }
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                gameState.currentPlayer = 1;
                gameState.player1Pos = 0;
                gameState.player2Pos = 0;
                gameState.diceValue = 0;
                gameState.gameOver = false;
                gameState.isProcessing = false;
                
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
                message.textContent = 'ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                message.style.backgroundColor = '#e3f2fd';
                message.style.color = '#4285f4';
                rollBtn.textContent = 'æ·éª°éª°å­';
                
                createBoard();
            }
            
            // æ·éª°éª°å­æŒ‰é’®äº‹ä»¶
            rollBtn.addEventListener('click', function() {
                if (gameState.gameOver) {
                    initGame();
                    return;
                }
                
                if (gameState.isProcessing) return; // å¦‚æœæ­£åœ¨å¤„ç†ä»»åŠ¡ï¼Œä¸å…è®¸æ·éª°éª°å­
                
                dice.textContent = '...';
                rollBtn.disabled = true;
                
                // æ¨¡æ‹Ÿéª°éª°å­åŠ¨ç”»
                let rolls = 0;
                const rollInterval = setInterval(() => {
                    gameState.diceValue = rollDice();
                    dice.textContent = gameState.diceValue;
                    rolls++;
                    
                    if (rolls >= 5) {
                        clearInterval(rollInterval);
                        rollBtn.disabled = false;
                        
                        // ç§»åŠ¨ç©å®¶
                        movePlayer(gameState.diceValue);
                    }
                }, 100);
            });
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        });
    </script>
</body>
</html>