<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é£è¡Œæ£‹-ç»ˆæç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .game-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        h1 {
            font-size: 24px;
            margin: 10px 0;
            color: #333;
        }
        
        .board {
            width: 100%;
            height: 50%;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 4px;
            margin-bottom: 10px;
            background-color: #fff;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #e0f7fa;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            position: relative;
            cursor: pointer;
        }
        
        .cell.special {
            background-color: #ffccbc;
        }
        
        .cell.start {
            background-color: #c8e6c9;
        }
        
        .cell.end {
            background-color: #ffcdd2;
        }
        
        .player1 {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: transparent;
            border-radius: 50%;
            z-index: 10;
        }
        
        .player1::before {
            content: "ğŸ‘¦";
            font-size: 20px;
            position: absolute;
        }
        
        .player2 {
            position: absolute;
            width: 24px;
            height: 24px;
            background-color: transparent;
            border-radius: 50%;
            z-index: 10;
        }
        
        .player2::before {
            content: "ğŸ‘§";
            font-size: 20px;
            position: absolute;
        }
        
        .dice-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .dice {
            width: 60px;
            height: 60px;
            background-color: #fff;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            margin-bottom: 8px;
            user-select: none;
        }
        
        .dice:active {
            transform: scale(0.95);
        }
        
        #roll-btn {
            padding: 8px 16px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        
        #roll-btn:active {
            background-color: #3367d6;
        }
        
        .player-info {
            width: 100%;
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px;
        }
        
        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .player.active {
            background-color: #e3f2fd;
            box-shadow: 0 0 0 3px #2196f3;
            transform: scale(1.05);
        }
        
        .player1-info {
            color: #4285f4;
        }
        
        .player2-info {
            color: #ea4335;
        }
        
        .rules {
            width: 100%;
            background-color: #fff;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            max-height: 120px;
            font-size: 12px;
        }
        
        .rules h3 {
            margin-bottom: 8px;
            color: #2196f3;
            font-size: 14px;
        }
        
        .rules ul {
            padding-left: 16px;
        }
        
        .rules li {
            margin-bottom: 4px;
        }
        
        .message {
            width: 100%;
            padding: 8px;
            background-color: #e3f2fd;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 8px;
            font-size: 13px;
            color: #2196f3;
            font-weight: bold;
        }
        
        .task-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 300px;
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 100;
            display: none;
            text-align: center;
        }
        
        .task-popup h3 {
            margin-bottom: 15px;
            color: #ff9800;
        }
        
        .task-popup p {
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .task-popup button {
            padding: 8px 16px;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .task-popup button:active {
            background-color: #f57c00;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>é£è¡Œæ£‹-ç»ˆæç‰ˆ</h1>
        
        <div class="message" id="message">ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­</div>
        
        <div class="board" id="board">
            <!-- æ£‹ç›˜æ ¼å­å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="player-info">
            <div class="player player1-info active" id="player1-info">
                <span>ç©å®¶1</span>
                <span id="player1-pos">ä½ç½®: èµ·ç‚¹</span>
            </div>
            <div class="player player2-info" id="player2-info">
                <span>ç©å®¶2</span>
                <span id="player2-pos">ä½ç½®: èµ·ç‚¹</span>
            </div>
        </div>
        
        <div class="dice-container">
            <div class="dice" id="dice">?</div>
            <button id="roll-btn">æ·éª°éª°å­</button>
        </div>
        
        <div class="rules">
            <h3>æ¸¸æˆè§„åˆ™</h3>
            <ul>
                <li>ä¸¤ä½ç©å®¶è½®æµæ·éª°éª°å­å‰è¿›</li>
                <li>å…ˆåˆ°è¾¾ç»ˆç‚¹ï¼ˆç¬¬50æ ¼ï¼‰çš„ç©å®¶è·èƒœ</li>
                <li>æ‰€æœ‰æ ¼å­éƒ½æœ‰å›ºå®šä»»åŠ¡</li>
                <li>ç‰¹æ®Šæ ¼å­æœ‰åé€€ã€å‰è¿›æˆ–é‡æ‘‡æ•ˆæœ</li>
                <li>æ™®é€šæ ¼å­æœ‰å›ºå®šäº’åŠ¨ä»»åŠ¡</li>
            </ul>
        </div>
        
        <div class="task-popup" id="task-popup">
            <h3 id="task-title">ä»»åŠ¡</h3>
            <p id="task-content"></p>
            <button id="task-ok">ç¡®å®š</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆçŠ¶æ€
            const gameState = {
                currentPlayer: 1,
                player1Pos: 0,
                player2Pos: 0,
                diceValue: 0,
                gameOver: false,
                isProcessing: false, // æ ‡è®°æ˜¯å¦æ­£åœ¨å¤„ç†ä»»åŠ¡
                // ç‰¹æ®Šæ ¼å­å®šä¹‰
                specialCells: {
                    5: { type: 'back', value: 2, message: 'åé€€2æ ¼!' },	
					9: { type: 'reroll', message: 'è·å¾—ä¸€æ¬¡é‡æ·æœºä¼š!' },
					14: { type: 'back', value: 3, message: 'åé€€3æ ¼!' },	
                    27: { type: 'back', value: 7, message: 'åé€€7æ ¼!' },
                    35: { type: 'forward', value: 5, message: 'å‰è¿›5æ ¼!' },
                    47: { type: 'back', value: 3, message: 'åé€€3æ ¼!' }
                },
                // æ‰€æœ‰æ ¼å­çš„å›ºå®šä»»åŠ¡
                cellTasks: {
                    1: "èµ·ç‚¹",
                    2: "æˆ´ä¸Šçœ¼ç½©äº«å—å¯¹æ–¹èˆ”ä»»æ„éƒ¨ä½ä¸€åˆ†é’Ÿ",
                    3: "è®©å¯¹æ–¹ç©¿ä¸Šå†…è£¤åèˆ”æ¹¿",
                    4: "å˜´é‡Œé…¸å¥¶æµå‡ºè®©å¯¹æ–¹èˆ”",
                    5: "åé€€äºŒæ ¼å¹¶è„±å…‰",
                    6: "éœ²å‡ºç§å¤„å¹¶å…è®¸å¯¹æ–¹æ‹ç…§ä¸€å¼ ",
                    7: "èƒ¸å¤¹é“ƒé“›æ‰£å¯¹æ–¹10ç§’",
                    8: "æ’…èµ·å±å±è®©å¯¹æ–¹å¸Bæˆ–jj15ç§’",
                    9: "é‡æ‘‡ä¸€æ¬¡éª°å­",
                    10: "å¸¦çœ¼ç½©å«ç€å¯¹æ–¹ä¸‹ä½“èˆŒå¤´æ‰“è½¬20ç§’",
                    11: "æˆ´ä¸Šé¡¹åœˆè¢«å¯¹æ–¹ç‰µç€ç»³å­å£äº¤30ç§’",
                    12: "ç”¨ç¾½æ‹è¹­Bæˆ–èŠèŠ±30ç§’",
                    13: "æ‹´ä¸Šåå­—æ‰£æŠ½æ’ä¸€åˆ†é’Ÿä¸è®¸å°„",
                    14: "åé€€ä¸‰æ ¼",
                    15: "æ‰‹è„šé“ä¸Šè®©å¯¹æ–¹æ‘§æ®‹ä¸€åˆ†é’Ÿ",
                    16: "è¿›è¡Œ69å¼1åˆ†é’Ÿ",
                    17: "ç”¨è·³è›‹æŒ‰æ‘©æµæ°´æˆ–å‹ƒèµ·",
                    18: "ç»™å¯¹æ–¹æˆ´ä¸Šå£çƒæˆ–è·³è›‹æŒ‘é€—ä¸€åˆ†é’Ÿ",
                    19: "ç”¨æ†ç»³æ†ä½å¯¹æ–¹ç¼©æˆä¸€å›¢ç”¨çš®é­æŠ½ä¸€åˆ†é’Ÿ",
                    20: "ååˆ°å¯¹æ–¹è„¸ä¸Šè®©å¯¹æ–¹å¸å®30ç§’",
                    21: "ç»™å¯¹æ–¹ä¸‹ä½“å€’é…¸å¥¶å¹¶èˆ”å¹²",
                    22: "è¢«å¯¹æ–¹ä½¿ç”¨5ç§é“å…·ä¸è¶…è¿‡2åˆ†é’Ÿ",
                    23: "è®©å¯¹æ–¹å˜´å¤¹é“ƒé“›å£äº¤30ç§’",
                    24: "è§£å¼€èº«ä¸Šæ‰€æœ‰é“å…·",
                    25: "å¼ å¼€å˜´è®©å¯¹æ–¹ä¸‹ä½“ç£¨è¹­30ç§’",
                    26: "æ‹´ç‹—ç»³è·ªåœ¨å¯¹æ–¹é¢å‰å£äº¤",
                    27: "å›åˆ°20",
                    28: "ç”¨è·³è›‹æŒ‰æ‘©ä¸€åˆ†é’Ÿå¹¶æ‹”æ‰ä¸€æ ¹æ¯›",
                    29: "é…¸å¥¶å€’åœ¨è‡ªå·±èƒ¸å‰è‡³ä¸‹ä½“è®©å¯¹æ–¹èˆ”å¹²å‡€",
                    30: "ç”¨æ†ç»³æ†ä½å¯¹æ–¹ä¸ºæ‰€æ¬²ä¸ºä¸€åˆ†é’Ÿ",
                    31: "è§‚éŸ³åè²çš®é­æŠ½èƒ¸1åˆ†é’Ÿ",
                    32: "èƒ¸å¤¹é“ƒé“›å•ªå¯¹æ–¹30ç§’",
                    33: "ç‰µç‹—ç»³åˆ°æˆ¿é—´é—¨å£äº¤1åˆ†é’Ÿ",
                    34: "éšæ„æŒ‡å®šå¯¹æ–¹å®Œæˆä¸€é¡¹ä»»åŠ¡",
                    35: "å‰è¿›äº”æ ¼",
                    36: "æ‹´ç‹—ç»³ç‹—çˆ¬å¼æŠ½æ’äº•çš®é­æŠ½1åˆ†é’Ÿ",
                    37: "æ†ç»‘æ‹‰åˆ°å«ç”Ÿé—´æ·‹æ¹¿",
                    38: "è¢«å¯¹æ–¹éšæ„æŒ‡å®šä¸€é¡¹ä»»åŠ¡",
                    39: "ç»™å¯¹æ–¹æˆ´ç½©ä»»ç”±è‡ªå·±å®°å‰²ä¸€åˆ†é’Ÿ",
                    40: "æš‚åœä¸€ä¸‹",
                    41: "æˆ´ä¸Šå£çƒæ‘§æ®‹ä¸€åˆ†é’Ÿ",
                    42: "çš®é­æŠ½å±å±30ç§’",
                    43: "ç”¨Bæˆ–JJè¹­è„¸30ç§’",
                    44: "æŒ‰åœ¨åœ°æ¿æŠ½æ’1åˆ†é’Ÿ",
                    45: "ç»‘åœ¨å‡³å­ä¸Šçš®é­æŠ½1åˆ†é’Ÿ",
                    46: "çš®é­æŠ½èƒ¸10ä¸‹",
                    47: "åé€€ä¸‰æ ¼",
                    48: "æ‹ä¸€æ®µå¯¹æ–¹å¸¦çœ¼ç½©è¢«ä½ æ‘§æ®‹çš„è§†é¢‘30ç§’",
                    49: "ä½¿ç”¨ä»»ä½•é“å…·æŠŠå¯¹æ–¹å¼„æµæ°´æˆ–è€…å‹ƒèµ·",
                    50: "ç»ˆç‚¹"
                }
            };
            
            // DOM å…ƒç´ 
            const board = document.getElementById('board');
            const dice = document.getElementById('dice');
            const rollBtn = document.getElementById('roll-btn');
            const message = document.getElementById('message');
            const player1Info = document.getElementById('player1-info');
            const player2Info = document.getElementById('player2-info');
            const player1Pos = document.getElementById('player1-pos');
            const player2Pos = document.getElementById('player2-pos');
            const taskPopup = document.getElementById('task-popup');
            const taskTitle = document.getElementById('task-title');
            const taskContent = document.getElementById('task-content');
            const taskOk = document.getElementById('task-ok');
            
            // åˆ›å»ºæ£‹ç›˜
            function createBoard() {
                board.innerHTML = '';
                
                // åˆ›å»º50ä¸ªæ ¼å­
                for (let i = 1; i <= 50; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = i;
                    cell.id = `cell-${i}`;
                    
                    // æ ‡è®°ç‰¹æ®Šæ ¼å­
                    if (gameState.specialCells[i]) {
                        cell.classList.add('special');
                    }
                    
                    // èµ·ç‚¹å’Œç»ˆç‚¹
                    if (i === 1) {
                        cell.classList.add('start');
                    } else if (i === 50) {
                        cell.classList.add('end');
                    }
                    
                    board.appendChild(cell);
                }
                
                // æ·»åŠ ç©å®¶æ£‹å­
                updatePlayerPositions();
            }
            
            // æ›´æ–°ç©å®¶ä½ç½®
            function updatePlayerPositions() {
                // ç§»é™¤æ—§çš„æ£‹å­
                const oldPieces = document.querySelectorAll('.player1, .player2');
                oldPieces.forEach(piece => piece.remove());
                
                // æ·»åŠ ç©å®¶1æ£‹å­
                if (gameState.player1Pos > 0 && gameState.player1Pos <= 50) {
                    const cell = document.getElementById(`cell-${gameState.player1Pos}`);
                    const piece = document.createElement('div');
                    piece.className = 'player1';
                    cell.appendChild(piece);
                }
                
                // æ·»åŠ ç©å®¶2æ£‹å­
                if (gameState.player2Pos > 0 && gameState.player2Pos <= 50) {
                    const cell = document.getElementById(`cell-${gameState.player2Pos}`);
                    const piece = document.createElement('div');
                    piece.className = 'player2';
                    cell.appendChild(piece);
                }
                
                // æ›´æ–°ä½ç½®æ˜¾ç¤º
                player1Pos.textContent = gameState.player1Pos === 0 ? 'ä½ç½®: èµ·ç‚¹' : `ä½ç½®: ${gameState.player1Pos}`;
                player2Pos.textContent = gameState.player2Pos === 0 ? 'ä½ç½®: èµ·ç‚¹' : `ä½ç½®: ${gameState.player2Pos}`;
            }
            
            // æ·éª°éª°å­
            function rollDice() {
                return Math.floor(Math.random() * 6) + 1;
            }
            
            // åˆ‡æ¢ç©å®¶
            function switchPlayer() {
                gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
                
                if (gameState.currentPlayer === 1) {
                    player1Info.classList.add('active');
                    player2Info.classList.remove('active');
                    message.textContent = 'ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                    message.style.backgroundColor = '#e3f2fd';
                    message.style.color = '#4285f4';
                } else {
                    player1Info.classList.remove('active');
                    player2Info.classList.add('active');
                    message.textContent = 'ç©å®¶2çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                    message.style.backgroundColor = '#ffebee';
                    message.style.color = '#ea4335';
                }
            }
            
            // æ˜¾ç¤ºä»»åŠ¡å¼¹çª—
            function showTaskPopup(title, content) {
                gameState.isProcessing = true; // æ ‡è®°æ­£åœ¨å¤„ç†ä»»åŠ¡
                taskTitle.textContent = title;
                taskContent.textContent = content;
                taskPopup.style.display = 'block';
                
                return new Promise((resolve) => {
                    taskOk.onclick = function() {
                        taskPopup.style.display = 'none';
                        gameState.isProcessing = false; // æ ‡è®°ä»»åŠ¡å¤„ç†å®Œæˆ
                        resolve();
                    };
                });
            }
            
            // å¤„ç†æ ¼å­ä»»åŠ¡/
async function handleCellTask(position, player) {
    const task = gameState.cellTasks[position];
    const cellEffect = gameState.specialCells[position];
    
    // å…ˆæ˜¾ç¤ºæ ¼å­å›ºå®šä»»åŠ¡
    await showTaskPopup('äº’åŠ¨ä»»åŠ¡', task);
    
    if (cellEffect) {
        // ç‰¹æ®Šæ ¼å­
        await showTaskPopup('ç‰¹æ®Šæ•ˆæœ', cellEffect.message);
        
        switch (cellEffect.type) {
            case 'back':
                if (player === 1) {
                    gameState.player1Pos = Math.max(1, gameState.player1Pos - cellEffect.value);
                } else {
                    gameState.player2Pos = Math.max(1, gameState.player2Pos - cellEffect.value);
                }
                break;
                
            case 'forward':
                if (player === 1) {
                    gameState.player1Pos = Math.min(50, gameState.player1Pos + cellEffect.value);
                } else {
                    gameState.player2Pos = Math.min(50, gameState.player2Pos + cellEffect.value);
                }
                break;
                
            case 'reroll':
                return true; // éœ€è¦é‡æ·
        }
        
        updatePlayerPositions();
        
        // å¦‚æœç§»åŠ¨åˆ°äº†æ–°æ ¼å­ï¼Œæ˜¾ç¤ºæ–°æ ¼å­çš„ä»»åŠ¡
        const newPosition = player === 1 ? gameState.player1Pos : gameState.player2Pos;
        if (newPosition !== position) {
            await showTaskPopup('äº’åŠ¨ä»»åŠ¡', gameState.cellTasks[newPosition]);
        }
    }
    
    return false; // ä¸éœ€è¦é‡æ·
}



            // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
            function checkGameOver() {
                if (gameState.player1Pos === 50) {
                    message.textContent = 'ç©å®¶1è·èƒœï¼æ¸¸æˆç»“æŸ';
                    message.style.backgroundColor = '#c8e6c9';
                    message.style.color = '#2e7d32';
                    gameState.gameOver = true;
                    rollBtn.textContent = 'é‡æ–°å¼€å§‹';
                    return true;
                }
                
                if (gameState.player2Pos === 50) {
                    message.textContent = 'ç©å®¶2è·èƒœï¼æ¸¸æˆç»“æŸ';
                    message.style.backgroundColor = '#ffcdd2';
                    message.style.color = '#c62828';
                    gameState.gameOver = true;
                    rollBtn.textContent = 'é‡æ–°å¼€å§‹';
                    return true;
                }
                
                return false;
            }
            
            // å¤„ç†ç©å®¶ç§»åŠ¨
            async function movePlayer(steps) {
                if (gameState.gameOver || gameState.isProcessing) return;
                
                const player = gameState.currentPlayer;
                let currentPosition = player === 1 ? gameState.player1Pos : gameState.player2Pos;
                let newPosition = currentPosition + steps;
                
                // å¦‚æœè¶…è¿‡ç»ˆç‚¹ï¼Œéœ€è¦å€’å›
                if (newPosition > 50) {
                    newPosition = 50 - (newPosition - 50);
                }
                
                // æ·»åŠ ç§»åŠ¨åŠ¨ç”»
                for (let i = 1; i <= steps; i++) {
                    const tempPos = currentPosition + i;
                    if (tempPos > 50) {
                        // å¤„ç†è¶…è¿‡ç»ˆç‚¹çš„æƒ…å†µ
                        const bouncePos = 50 - (tempPos - 50);
                        if (player === 1) {
                            gameState.player1Pos = bouncePos;
                        } else {
                            gameState.player2Pos = bouncePos;
                        }
                    } else {
                        if (player === 1) {
                            gameState.player1Pos = tempPos;
                        } else {
                            gameState.player2Pos = tempPos;
                        }
                    }
                    
                    updatePlayerPositions();
                    await new Promise(resolve => setTimeout(resolve, 300)); // æ¯æ­¥300æ¯«ç§’
                }
                
                if (checkGameOver()) return;
                
                // å¤„ç†æ ¼å­ä»»åŠ¡
                const needsReroll = await handleCellTask(newPosition, player);
                
                if (needsReroll) {
                    message.textContent = player === 1 
                        ? 'ç©å®¶1è·å¾—é‡æ·æœºä¼šï¼' 
                        : 'ç©å®¶2è·å¾—é‡æ·æœºä¼šï¼';
                    return;
                }
                
                // åˆ‡æ¢ç©å®¶
                switchPlayer();
            }
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                gameState.currentPlayer = 1;
                gameState.player1Pos = 0;
                gameState.player2Pos = 0;
                gameState.diceValue = 0;
                gameState.gameOver = false;
                gameState.isProcessing = false;
                
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
                message.textContent = 'ç©å®¶1çš„å›åˆï¼Œè¯·æ·éª°éª°å­';
                message.style.backgroundColor = '#e3f2fd';
                message.style.color = '#4285f4';
                rollBtn.textContent = 'æ·éª°éª°å­';
                
                createBoard();
            }
            
            // æ·éª°éª°å­æŒ‰é’®äº‹ä»¶
            rollBtn.addEventListener('click', function() {
                if (gameState.gameOver) {
                    initGame();
                    return;
                }
                
                if (gameState.isProcessing) return; // å¦‚æœæ­£åœ¨å¤„ç†ä»»åŠ¡ï¼Œä¸å…è®¸æ·éª°éª°å­
                
                dice.textContent = '...';
                rollBtn.disabled = true;
                
                // æ¨¡æ‹Ÿéª°éª°å­åŠ¨ç”»
                let rolls = 0;
                const rollInterval = setInterval(() => {
                    gameState.diceValue = rollDice();
                    dice.textContent = gameState.diceValue;
                    rolls++;
                    
                    if (rolls >= 5) {
                        clearInterval(rollInterval);
                        rollBtn.disabled = false;
                        
                        // ç§»åŠ¨ç©å®¶
                        movePlayer(gameState.diceValue);
                    }
                }, 100);
            });
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        });
    </script>
</body>
</html>